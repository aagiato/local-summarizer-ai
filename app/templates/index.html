<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document Summarizer</title>
</head>
<body>
  <h1>Upload a Document for Summarization</h1>

  <form method="POST" enctype="multipart/form-data">
    <label>Choose a .pdf or .txt:</label>
    <input type="file" name="file" accept=".pdf,.txt" required><br><br>

    <label>Temperature (creativity):</label>
    <input type="range" name="temperature" min="0" max="1" step="0.05" value="0.3"
           oninput="this.nextElementSibling.textContent = this.value">
    <span>0.3</span><br><br>

    <label>Model:</label>
    <select name="model">
      <option value="llama3">LLAMA 3 (default – best for summarization)</option>
      <option value="vicuna2">Vicuna 2</option>
    </select><br><br>

    <label>Export Format:</label>
    <select name="export">
      <option value="txt">TXT only</option>
      <option value="pdf">PDF only</option>
      <option value="both" selected>Both TXT &amp; PDF</option>
    </select><br><br>

    <button type="submit">Summarize</button>
  </form>

  {% if done %}
    <hr>
    <h2>✅ Summary Complete</h2>

    <p><strong>Label:</strong> {{ summary.label }}</p>
    <p>
      <strong>Model:</strong> {{ summary.model }}
      &nbsp;&nbsp;<strong>Temp:</strong> {{ summary.temperature }}
      &nbsp;&nbsp;<strong>Time:</strong> {{ summary.uploaded_at }}
    </p>

    <h3>Summary:</h3>
    <p>{{ summary.summaries[0] }}</p>

    <h3>Exported Files (on disk):</h3>
    <ul>
      {% if summary.export_paths.txt %}
        <li><code>TXT → {{ summary.export_paths.txt }}</code></li>
      {% endif %}
      {% if summary.export_paths.pdf %}
        <li><code>PDF → {{ summary.export_paths.pdf }}</code></li>
      {% endif %}
    </ul>

    <p>
      Open your file explorer to those locations to retrieve your exports.
    </p>
  {% endif %}

</body>
</html>
